import{Q as J,W as V,a2 as F,r as R,c as G,e as A,aa as H,o as X,I as Y,ab as T,i as j,S as K,k as u,l as s,X as c,D as m,m as y,q as v,z as h,F as f,C as I,x as _,t as C,v as z,j as l,K as N,U as x,V as O}from"./index.c94220ca.js";import{C as W}from"./Comments.dd0102b8.js";var Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB4CAQAAABPlIpuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfmDAwCBQjzx6ifAAAEVElEQVRYw+3ZT2gcVRwH8B/T3S2j27LQcQlJTbNKZDWlHgwtevBQqFQEpYqgiD30UqsgpShFkdA1rDbZppAcolDSWpAgQgrtIanC0mxDiSYrS7qpNqHZ3UlmdtzMTGfyZ1gjMV8Ps9GQKvvmeQjC/t75M783v/fe78EMUZUICJlQ8WM5JseMq86YM2FdlzvkmHqm8GRAqEoDgnJMjs12lRVU4o8F7aIcUz7MPFQVT0Xl2HR7eRoAynAqPNcpx5QXquLcy3KscAEALBgwYAAArOvT7cq7VSd97+1s3LgKADaWsYwFOACciWx85hMmLF8DAAcOHCxjBYD1ExO+/WI2PtELAL/DgYMyAEC+lo3ffacqHtiTjY92aGPYEGUllcjGx56visn345HRju+71PF1auVSX452pE/u2M6AD+9Mn0wlBs8P983mFC09MHg+lUh/OrCHfAybhHyHdw6+lkrcSeowcW8qlbh54kw9BRgxBUjsemL6igETs3e+eoYe3rGdfEzbMyCQj3wk5hIGTMzdJJEC5AsIVfE6Dwjkm+0wYEIdJp9LGfDffO6sARPqjb8exx4bMXkP9XMDJoo3iGq4hmu4hmu4hmv4n7C2JdiECTXJhYvdJgyoQ3yZ+0wYKH7Lhee/s6Bj7gsubMzYKEE5xkOjJiwoWKrnwHrCggE5z0HLoqlZ0Pje2PjMggH5N6PJO22yFiwUMfsNR15zyEYJhcXFXZ7p/TcsmFAwd5qjVPOqBQ1yhqdUvW6pSvu80wP2igkFah9P3nEbJRR+xTbvu+oDCybmVuXXPdOlend1C8M8U75iQ0dhcb7OO33FXjOhQG3zTBEwZiyUkL/LsyG73NVVnvVMS/vssgkF+X6evCPu6pZF73nfc1eXo1stPXJ/3oKG/CjPlPtt6JAdjp6hHXJXV+72vrrb9CkbJb4eqZ9yewbHQSDSp2zonD2jyYANDdohniv0uAEL8yrfFdpmwERxnPvy/k83v8l789fw/wjr0LmwQILcrUFDfoj8JJDghfpJ/Lm3gAKmBkn0wgXyk0ihWxcmMYl0kkIVzohFCj3+aDo5iUlksm9GK5wp/BSk8KVXncoH2eRHVEdB1tx+ClJD59ENuJFC7DhEkc6jNixYsDHQTs0kkciCBRJJoujpExqKKELD5bPUQnVs2E9BapRaj5/6Be441yO1UoRt4n6SqHnXwXM9GaSRRgaXBh57iVoozJI7SA1HDi6pGz9Bryy0vUWNLBUPUeRWDzbF1CA1k1QdSxQd+3ozLgxTC0vFJWp5EOdG6GmWt/53XLcVuDDMOu1o+jKwAhvrfysqBWPCzRMXAQfunx0dpoujLDhEkQexmmQ7HEFq+KF9M873sx1LkaQDT5kjq2sr7tbE6tri7fefozDL9vRTkMIUkfZKrbv3794vtUp7KUJ1rKfKT0GSKEwNlREmiYJsTVCodE+RgpUhkkh+L/3TfYS/gjw1/a2IPwECo3wLWhgFUAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0xMi0xMlQwMjowNDo1NCswMDowMOYBQ6MAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMTItMTJUMDI6MDQ6NTQrMDA6MDCXXPsfAAAAAElFTkSuQmCC";const $={name:"SongDetail",setup(){const{proxy:o}=N(),t=V(),w=F(),e=R({songInfo:null,sId:0,coverDesc:"",simiSong:[],playlists:[],mlogMv:[],commentType:0}),k=G(null),M=A(()=>t.getters.isLogin),d=A(()=>t.getters.isPlayed),D=A(()=>t.getters.playList),S=A(()=>t.getters.playIndex),p=A(()=>D.value[S.value]),n=A(()=>d.value&&p.value&&p.value.id===e.sId),g=A(()=>n.value?"icon-audio-pause":"icon-audio-play"),E=A(()=>e.songInfo.license||e.songInfo.vip?"disable":""),B=async()=>{const{data:i}=await o.$http.songDetail({ids:e.sId,timestamp:new Date().valueOf()});if(i.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");i.songs[0].license=!i.privileges[0].cp,e.songInfo=o.$utils.formatSongs(i.songs,i.privileges)[0],e.coverDesc=e.songInfo.alia.join(" / ")},P=i=>{if(!p.value||p.value.id!==i.id){if(i.license){o.$msg.error("\u7531\u4E8E\u7248\u6743\u4FDD\u62A4\uFF0C\u60A8\u6240\u5728\u7684\u5730\u533A\u6682\u65F6\u65E0\u6CD5\u4F7F\u7528\u3002");return}if(i.vip){o.$msg.error("\u4ED8\u8D39\u6B4C\u66F2\uFF0C\u8BF7\u5728\u7F51\u6613\u4E91\u97F3\u4E50\u64AD\u653E");return}t.dispatch("selectPlay",{list:[i]}),t.commit("SET_PLAYLISTTIPS",!0)}else t.commit("SET_PLAYSTATUS",!d.value)},Q=async()=>{const{data:i}=await o.$http.simiSong({id:e.sId});if(i.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");e.simiSong=i.songs.map(r=>({id:String(r.id),name:r.name,mvId:r.mvid,singer:r.artists,album:r.album,alia:r.alias,duration:o.$utils.formatSongTime(r.duration),url:`https://music.163.com/song/media/outer/url?id=${r.id}.mp3`,vip:r.fee===1,license:r.license,publishTime:r.publishTime}))},U=A(()=>function(i){return p.value&&String(i.id)===p.value.id&&d.value?"icon-audio-pause":"icon-audio-play"}),b=async()=>{const{data:i}=await o.$http.simiPlayList({id:e.sId});if(i.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");e.playlists=i.playlists},q=()=>{k.value.scrollIntoView(!0)};H(i=>{e.sId=i.query.id,L()}),X(()=>{e.sId=w.query.id,L()});const L=()=>{e.sId&&(B(),Q(),b())};return{...Y(e),getSimiPlayList:b,playSimiIcon:U,playFontIcon:g,songDisable:E,jumpComment:q,isCurSong:n,isLogin:M,plyaing:P,cBox:k}},components:{Lyrics:T,CommentList:W}},a=o=>(x("data-v-40f46286"),o=o(),O(),o),ss={key:0,class:"song-container"},os={class:"song-main"},ns={class:"song-header"},es={class:"song-l"},is={class:"song-info"},ts={class:"info-top"},ls={class:"song-name"},as=a(()=>s("i",{class:"iconfont icon-mvlist"},null,-1)),cs={key:1,class:"iconfont icon-vip"},ds={class:"song-related"},rs={key:0,class:"cover-desc"},us=a(()=>s("h5",null,"\u4E13\u8F91\u7B80\u4ECB",-1)),ms={class:"info-bottom"},ps={class:"song-oper"},gs=a(()=>s("i",{class:"iconfont icon-collect"},null,-1)),As=a(()=>s("i",{class:"iconfont icon-comment"},null,-1)),vs={class:"simi-song"},_s=a(()=>s("h3",{class:"aside-title"},"\u76F8\u4F3C\u6B4C\u66F2",-1)),hs={class:"simi-main"},ys={class:"simi-info"},fs={class:"simi-author"},Is={class:"simi-song-status"},Cs={key:0,class:"iconfont icon-vip"},ks=["onClick"],Ds=a(()=>s("i",{class:"iconfont icon-add",title:"\u6DFB\u52A0\u5230\u5217\u8868"},null,-1)),Ss={class:"song-lyric"},Es=a(()=>s("h5",null,"\u6B4C\u8BCD",-1)),ws={class:"song-comments",ref:"cBox"},Ms={class:"aside-box"},bs={class:"cover"},Ls=a(()=>s("em",{class:"lt"},null,-1)),js=a(()=>s("em",{class:"rt"},null,-1)),Ts=a(()=>s("em",{class:"rb"},null,-1)),Bs=a(()=>s("em",{class:"lb"},null,-1)),Ps=a(()=>s("img",{src:Z,class:"cover-stylus"},null,-1)),Qs=a(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Us={key:0,class:"sidebar-box playlist-simi"},qs=a(()=>s("h3",{class:"aside-title"},"\u5305\u542B\u8FD9\u9996\u6B4C\u7684\u6B4C\u5355",-1)),Js={class:"aside-main playlist-main"},Vs=a(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Fs={class:"playlist-info"},Rs={class:"playlist-name"},Gs={class:"playlist-author"};function Hs(o,t,w,e,k,M){const d=j("router-link"),D=T,S=j("comment-list"),p=K;return o.songInfo?(l(),u("div",ss,[s("div",os,[s("div",ns,[s("div",es,[s("div",is,[s("div",ts,[s("h3",ls,[c(m(o.songInfo.name)+" ",1),o.songInfo.mvId?(l(),y(d,{key:0,class:"mv-name",to:{path:"/mvlist/mv",query:{id:o.songInfo.mvId}}},{default:v(()=>[as]),_:1},8,["to"])):h("",!0),o.songInfo.vip?(l(),u("i",cs)):h("",!0)]),s("p",null,[(l(!0),u(f,null,I(o.songInfo.singer,(n,g)=>(l(),y(d,{to:{path:"/singer",query:{id:n.id}},class:"song-author",key:n.name},{default:v(()=>[c(m(g!==0?" / "+n.name:n.name),1)]),_:2},1032,["to"]))),128))]),s("p",ds,[s("span",null,[c("\u4E13\u8F91\uFF1A"),_(d,{class:"song-album",to:{path:"/album",query:{id:o.songInfo.album.id}}},{default:v(()=>[c(m(o.songInfo.album.name),1)]),_:1},8,["to"])]),s("span",null,[c("\u53D1\u884C\u65F6\u95F4\uFF1A"),s("em",null,m(o.songInfo.publishTime),1)])]),o.coverDesc?(l(),u("div",rs,[us,s("p",null,m(o.coverDesc),1)])):h("",!0)]),s("div",ms,[s("div",ps,[s("span",{class:C(["play-btn","play-all",e.songDisable]),onClick:t[0]||(t[0]=n=>e.plyaing(o.songInfo))},[s("i",{class:C(["iconfont",e.playFontIcon])},null,2),c(" "+m(o.songInfo.vip?"VIP\u5C0A\u4EAB":"\u7ACB\u5373\u64AD\u653E"),1)],2),s("span",{class:"play-btn play-collect",onClick:t[1]||(t[1]=(...n)=>o.showAddList&&o.showAddList(...n))},[gs,c(" \u6536\u85CF")]),s("span",{class:"play-btn play-comment",onClick:t[2]||(t[2]=(...n)=>e.jumpComment&&e.jumpComment(...n))},[As,c(" \u8BC4\u8BBA")])])])]),s("div",vs,[_s,s("div",hs,[(l(!0),u(f,null,I(o.simiSong,n=>(l(),u("div",{class:"simi-item",key:n.id},[s("div",ys,[_(d,{class:"simi-name",to:{path:"/song",query:{id:n.id}}},{default:v(()=>[c(m(n.name),1)]),_:2},1032,["to"]),s("div",fs,[(l(!0),u(f,null,I(n.singer,(g,E)=>(l(),y(d,{to:{path:"/singer",query:{id:g.id}},class:"song-author",key:g.name},{default:v(()=>[c(m(E!==0?" / "+g.name:g.name),1)]),_:2},1032,["to"]))),128))])]),s("div",Is,[n.vip?(l(),u("i",Cs)):(l(),u("i",{key:1,onClick:g=>e.plyaing(n),class:C(["iconfont",e.playSimiIcon(n)])},null,10,ks)),Ds])]))),128))])])]),s("div",Ss,[Es,_(D,{sId:o.sId,maxH:"530"},null,8,["sId"])])]),s("div",ws,[_(S,{type:o.commentType,sId:o.sId},null,8,["type","sId"])],512)]),s("div",Ms,[s("div",bs,[Ls,js,Ts,Bs,s("div",{class:C(["cover-img",[e.isCurSong?"active":""]]),onClick:t[3]||(t[3]=z(n=>e.plyaing(o.songInfo),["stop"]))},[Ps,_(p,{src:o.songInfo.album.picUrl},{default:v(()=>[Qs]),_:1},8,["src"])],2)]),o.playlists.length?(l(),u("div",Us,[qs,s("div",Js,[(l(!0),u(f,null,I(o.playlists,n=>(l(),y(d,{class:"playlist-item",to:{path:"/playlist/detail",query:{id:n.id}},key:n.id},{default:v(()=>[_(p,{src:n.coverImgUrl},{default:v(()=>[Vs]),_:2},1032,["src"]),s("div",Fs,[s("div",Rs,m(n.name),1),s("div",Gs,[c(" By. "),_(d,{to:{path:"/user",query:{id:n.creator.userId}}},{default:v(()=>[c(m(n.creator.nickname),1)]),_:2},1032,["to"])])])]),_:2},1032,["to"]))),128))])])):h("",!0)])])):h("",!0)}var Ks=J($,[["render",Hs],["__scopeId","data-v-40f46286"]]);export{Ks as default};
