import{Q as V,j as a,k as i,U as F,V as N,l as o,d as T,i as R,x as b,q as f,X as m,D as c,t as j,S as J,F as g,C as $,m as p,z,a2 as W,R as Y,r as Z,o as x,aa as ee,I as te,a4 as D,ao as se,ap as ae,aq as oe,af as ne,an as le,s as A,y as B,K as ie}from"./index.c94220ca.js";import{_ as K}from"./MvList.3a8c06b6.js";import{_ as P}from"./PlayList.8792bb87.js";import{_ as U}from"./AlbumList.7ac6e3d0.js";import{_ as O}from"./Loading.15072aef.js";import"./el-skeleton-item.4d378480.js";const re={},H=e=>(F("data-v-719a2a26"),e=e(),N(),e),ue={class:"empty"},pe=H(()=>o("i",{class:"iconfont icon-empty"},null,-1)),ce=H(()=>o("p",null,"\u6682\u65E0\u7ED3\u679C",-1)),de=[pe,ce];function _e(e,r,u,t,h,v){return a(),i("div",ue,de)}var G=V(re,[["render",_e],["__scopeId","data-v-719a2a26"]]);const me=T({name:"ArtistItem",props:{item:{type:Object,required:!0}}}),C=e=>(F("data-v-7a5b151f"),e=e(),N(),e),ye={class:"item"},ge=C(()=>o("em",{class:"circle"},null,-1)),fe=C(()=>o("div",{slot:"placeholder",class:"image-slot"},[o("i",{class:"iconfont icon-placeholder"})],-1)),he={class:"info"},ve={class:"info-header"},ke={class:"info-num"},$e={class:"albumSize"},be=C(()=>o("em",null,"\u4E13\u8F91",-1)),Ce={class:"musicSize"},Ie=C(()=>o("em",null,"\u5355\u66F2",-1)),Se={class:"fansSize"},Ve=C(()=>o("em",null,"\u7C89\u4E1D",-1));function Le(e,r,u,t,h,v){const d=J,_=R("router-link");return a(),i("div",ye,[ge,b(_,{to:{path:"/singer",query:{id:e.item.id}},class:"faceImg"},{default:f(()=>[b(d,{src:e.item.picUrl+"?param=120y120"},{default:f(()=>[fe]),_:1},8,["src"])]),_:1},8,["to"]),o("div",he,[o("div",ve,[b(_,{to:{path:"/singer",query:{id:e.item.id}},class:"name"},{default:f(()=>[m(c(e.item.name),1)]),_:1},8,["to"]),o("i",{class:j(["iconfont icon-collect",{active:e.item.followed}])},null,2)]),o("div",ke,[o("span",$e,[be,m(c(e.item.albumSize),1)]),o("span",Ce,[Ie,m(c(e.item.musicSize),1)]),o("span",Se,[Ve,m(c(e.$utils.formartNum(e.item.fansCount)),1)])])])])}var Q=V(me,[["render",Le],["__scopeId","data-v-7a5b151f"]]);const qe=T({name:"searchArtist",props:{list:{type:Array,required:!0},loading:{type:Boolean,default:!1}},components:{Loading:O,ArtistItem:Q}}),we={class:"list-container"};function ze(e,r,u,t,h,v){const d=Q,_=O;return a(),i("div",we,[(a(!0),i(g,null,$(e.list,k=>(a(),p(d,{item:k},null,8,["item"]))),256)),e.loading?(a(),p(_,{key:0})):z("",!0)])}var Te=V(qe,[["render",ze],["__scopeId","data-v-f8b38b84"]]);const Ee=T({name:"SearchDetail",setup(){const e=W(),r=Y(),{proxy:u}=ie(),t=Z({keyVal:e.query.key,type:e.query.type||"1",typeList:[{k:1,v:"\u5355\u66F2",t:"\u9996\u5355\u66F2"},{k:10,v:"\u4E13\u8F91",t:"\u5F20\u4E13\u8F91"},{k:100,v:"\u6B4C\u624B",t:"\u4E2A\u6B4C\u624B"},{k:1e3,v:"\u6B4C\u5355",t:"\u4E2A\u6B4C\u5355"},{k:1004,v:"MV",t:"\u4E2AMV"}],index:0,total:0,offset:0,limit:24,list:[],currentpage:0,loading:!1,listType:{songs:"\u5355\u66F2",artists:"\u6B4C\u624B",albums:"\u4E13\u8F91",playlists:"\u6B4C\u5355"},suggestInfo:[]}),h=s=>{t.keyVal=s,t.keyVal&&(t.loading=!0,t.suggestInfo=[],I())},v=()=>{console.log(t.keyVal),t.keyVal&&(t.loading=!0,t.suggestInfo=[],I())},d=async()=>{t.loading=!0;const{data:s}=await u.$http.cloudsearch({keywords:t.keyVal,type:t.type,limit:t.limit,offset:t.offset});if(s.code!==200)return u.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.type==="1"?(t.list=s.result.songs&&s.result.songs.map(n=>({id:String(n.id),name:n.name,mvId:n.mv,singer:n.ar,album:n.al,alia:n.alia,vip:n.fee===1,license:n.license,duration:u.$utils.formatSongTime(n.dt),url:`https://music.163.com/song/media/outer/url?id=${n.id}.mp3`,publishTime:u.$utils.formatMsgTime(n.publishTime)})),t.total=s.result.songCount||0):t.type==="10"?(t.list=s.result.albums||[],t.total=s.result.albumCount||0):t.type==="100"?(t.list=s.result.artists||[],t.total=s.result.artistCount||0):t.type==="1000"?(t.list=s.result.playlists||[],t.total=s.result.playlistCount||0):t.type==="1004"?(t.list=s.result.mvs||[],t.total=s.result.mvCount||0):t.type==="1014"&&(t.list=s.result.videos||[],t.total=s.result.videoCount||0),t.loading=!1},_=s=>{t.type=s.k,t.total=0,t.offset=0,t.currentpage=0,r.push({path:"/search",query:{key:t.keyVal,type:t.type}})},k=s=>{t.offset=(s-1)*t.limit,t.currentpage=s,d()},I=async()=>{const{data:s}=await u.$http.serachSuggest({keywords:t.keyVal});if(t.loading=!1,s.code!==200)return u.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.result.order&&(t.suggestInfo=s.result.order.map(n=>({label:n,info:s.result[n]})))},L=(s,n)=>{switch(n){case"songs":r.push({path:"/song",query:{id:s.id}});break;case"artists":r.push({path:"/singer",query:{id:s.id}});break;case"albums":r.push({path:"/album",query:{id:s.id}});break;case"playlists":r.push({path:"/playlist/detail",query:{id:s.id}});break}},q=()=>{t.suggestInfo=[]},w=()=>{r.push({path:"/search",query:{key:t.keyVal,type:t.type}})},S=()=>{t.total=0,t.list=[],d()};return x(()=>{t.index=t.typeList.findIndex(s=>s.k==t.type),S()}),ee(s=>{t.keyVal=s.query.key,t.type=s.query.type||"1",t.index=t.typeList.findIndex(n=>n.k==t.type),S()}),{...te(t),selectType:_,currentChange:k,remoteMethod:h,handleFocus:v,jumpPage:L,clearVal:q,enterHandler:w}},components:{SongList:D,AlbumList:U,SearchArtist:Te,PlayList:P,MvList:K,Empty:G}}),Me={class:"search-detail"},Ae={class:"search-container"},Be={class:"search-hd"},Fe={class:"artists"},Ne={class:"search-main"},Re={class:"search-tab"},je=["onClick"],De={key:0,class:"search-list"},Ke={class:"pagination"};function Pe(e,r,u,t,h,v){const d=se,_=ae,k=oe,I=D,L=U,q=R("search-artist"),w=P,S=K,s=G,n=ne;return a(),i("div",Me,[o("div",Ae,[o("div",Be,[b(k,{modelValue:e.keyVal,"onUpdate:modelValue":r[0]||(r[0]=l=>e.keyVal=l),class:"search-box",clearable:"",filterable:"",remote:"",placeholder:"\u8BF7\u8F93\u5165\u6B4C\u540D\u3001\u6B4C\u8BCD\u3001\u6B4C\u624B\u6216\u4E13\u8F91","remote-method":e.remoteMethod,"fit-input-width":!0,loading:e.loading,"loading-text":"\u641C\u7D22\u4E2D...",onFocus:e.handleFocus,onClear:e.clearVal,onKeyup:le(e.enterHandler,["enter"])},{default:f(()=>[(a(!0),i(g,null,$(e.suggestInfo,l=>(a(),p(_,{key:e.listType[l.label],label:e.listType[l.label]},{default:f(()=>[(a(!0),i(g,null,$(l.info,(y,X)=>(a(),p(d,{key:l.label+X,label:y.name,value:l.label+y.name,class:"item",onClick:E=>e.jumpPage(y,l.label)},{default:f(()=>[m(c(y.name)+" ",1),l.label==="songs"?(a(),i(g,{key:0},[m(" - "),(a(!0),i(g,null,$(y.artists,(E,M)=>(a(),i("span",{class:"artists",key:M},c((M!==0?" / ":"")+E.name),1))),128))],64)):l.label==="albums"?(a(),i(g,{key:1},[m(" - "),o("span",Fe,c(y.artist.name),1)],64)):z("",!0)]),_:2},1032,["label","value","onClick"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","remote-method","loading","onFocus","onClear","onKeyup"])]),o("div",Ne,[o("h5",null,[m("\u641C\u7D22\u7ED3\u679C"),A(o("em",null,"("+c(e.total+e.typeList[e.index].t)+")",513),[[B,e.total]])]),o("div",Re,[(a(!0),i(g,null,$(e.typeList,l=>(a(),i("div",{class:j(["tab-item",{active:e.type==l.k}]),key:l.k,onClick:y=>e.selectType(l)},c(l.v),11,je))),128))]),e.total||e.loading?(a(),i("div",De,[e.type=="1"?(a(),p(I,{key:0,songList:e.list,stripe:!0,offset:e.offset,pageSize:e.limit},null,8,["songList","offset","pageSize"])):e.type=="10"?(a(),p(L,{key:1,class:"albums",albumList:e.list,loading:e.loading,num:e.limit},null,8,["albumList","loading","num"])):e.type=="100"?(a(),p(q,{key:2,list:e.list,loading:e.loading},null,8,["list","loading"])):e.type==="1000"?(a(),p(w,{key:3,class:"play",playList:e.list,loading:e.loading,num:e.limit},null,8,["playList","loading","num"])):e.type==="1004"?(a(),p(S,{key:4,mvList:e.list,loading:e.loading,num:e.limit},null,8,["mvList","loading","num"])):z("",!0)])):(a(),p(s,{key:1})),A(o("div",Ke,[b(n,{onCurrentChange:e.currentChange,"current-page":e.currentpage,"page-size":e.limit,layout:"prev, pager, next",total:e.total},null,8,["onCurrentChange","current-page","page-size","total"])],512),[[B,e.total>e.limit]])])])])}var Je=V(Ee,[["render",Pe],["__scopeId","data-v-e36fd7dc"]]);export{Je as default};
